Домашнее задание
Разработать микросервисную архитектуру для игры Танки

Цель: Представить в виде одной или нескольких диаграмм архитектуру приложения для игры в танки.
Цель: разбить Игру Танки на набор взаимодействующих между собой микросервисов и приложений.

Описание/Пошаговая инструкция выполнения домашнего задания:
Танковые бои могут проводить только зарегистрированные пользователи. Танковые бои проводятся как в рамках турниров, либо между любыми пользователями по договоренности.
Можно посмотреть список будущих турниров, подать заявку на участие в турнире, посмотреть результаты проходящих турниров, уже прошедших.
Участники боев получают уведомлении о приглашении на турнир, решение по заявке на участие в турнире, о завершении танкового боя, о скором начале стартового боя.
Участник танкового боя может посмотреть прошедший бой. За места в турнире участники получают рейтинговые очки.
Каждый пользователь может организовать свой турнир. Турниры получают рейтинг, который рассчитывается на основе рейтингов ее участников. Турнир может быть регулярным, тогда рейтинг его накапливается.
Игрок участвует в танковом бое посредством программы, которая загружается в специальное приложение Агент.
Для успешного решения задачи необходимо:

Определить набор микросервисов и веб-приложений и отобразить их на диграмме/наборе диаграмм.
Определить направления обмена сообщениями и Endpoints для каждого микросервиса и приложения.
Определить узкие места и потенциальные проблемы масштабирования приложения и способы их решения.
Определить компоненты, к которым чаще всего будут меняться требования и способы выполнения OCP для них.
Сделать текстовые пояснения к созданному решению. Все документы, составляющие решение выложить в git.
---

Экраны клиента:
1) Вход / регистрация (auth, notification)
2) Основной экран со списком турниров (tournaments)
3) Экран турнира (tournaments)
4) Создание нового турнира (tournaments)
5) Отправка приглашения пользователю (sessions, users)
6) Игровой экран (sessions)
7) Окно игровых уведомлений (notifications)

Основные сервисы:
1) gateway - входная точка для клиента. Все запросы приходят на гейт и дальше распределяются между сервисами через internal-запросы.
При каждом запросе проверяется наличие токена пользователя. Если токен отсутствует, то возвращается ошибка 401.
2) auth - сервис авторизации / регистрации пользователя. Взаимодействует с сервисом users, предоставляет клиенту формы
регистрации / авторизации и их обработку. Формирует токен пользователя со всей необходимой информацией после успешной 
авторизации.
3) users - сервис пользователей. Предоставляет список пользователей, подробную информацию о пользователе, апи для добавления /
редактирования пользователя. С данным сервисом взаимодействуют все остальные сервисы, которым требуется информация о
пользователях.
4) tournaments - предоставляет клиенту список всех турниров, предоставляет внутреннее апи для создания / редактирования турниров.
Взаимодействует с сервисом sessions для получения информации об играх входящих в турнир, а также с сервисом users.
Также отправляет в сервис notifications информацию о начале / отмене турниров.
5) sessions - основной игровой сервис. Предоставляет информацию о конкретных игровых сессиях, позволяет создавать новые сессии.
Взаимодействует с сервисами users, notifications. При помощи эндпоинта PUT /sessions/id принимает команды от клиента участвующего 
в игре.
6) notifications - сервис уведомлений. Предоставляет пользователям информацию о поступивших уведомлениях.
Принимает сообщения от сервисов sessions и tournaments и складывает их в очередь, откуда их читают подписанные клиенты.

Узкие места:
1) gateway - точка входа, принимает все сообщения, в том числе и сообщения об игровых сессиях.
Как вариант оптимизации - масштабирование доступных нод гейта. А также сообщения об игровых сессиях можно пускать напрямую в сервис сессий.
2) users - от сервиса зависят все ключевые сервисы. Как вариант увеличения надежности - добавить кэширование информации о пользователях.
В случае отказа, новые пользователи авторизоваться / зарегистрироваться не смогут, но бои / чемпионаты будут доступны.
Также можно отправлять сообщения для сервиса users об изменениях рейтинга, чтобы они могли примениться, когда сервис снова станет доступен.
3) Синхронное взаимодействие с сервисом sessions для игровых сессий. Возможно стоит организовать взаимодействие через
сокеты или же при помощи сообщений - это решение будет проще масштабировать.

Чаще всего будут изменяться:
Основные изменения будут происходить в самом клиенте игры, а также в сервисе sessions - обработчики принимаемых сообщений.
Возможно стоит вынести игровой сервис отдельно, т.к. функционал создания / присоединения к игре будет меняться значительно реже формата
принимаемого сообщения.
Для обеспечения OCP можно применить версионирование на методе игровых сессий для обеспечения обратной совместимости.
Формат сообщения сделать унифицированным, но менять обработчики.